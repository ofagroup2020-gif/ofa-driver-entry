<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>OFA GROUP Driver Registration App</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div class="bg" aria-hidden="true"></div>

  <main class="app">
    <header class="topbar">
      <div class="topLeft">
        <div class="logoWrap" id="logoWrap">
          <img class="logoImg" id="logoImg" src="./public/ofa-logo.png" alt="OFA" onerror="this.style.display='none';document.getElementById('logoWrap').classList.add('logoFallback');" />
          <div class="logoFallbackBadge">OFA</div>
        </div>
        <div class="brand">
          <div class="brandName">OFA GROUP</div>
          <div class="brandSub">Driver Registration App</div>
        </div>
      </div>
      <div class="chip">
        <span class="dot"></span>
        <span id="stepText">STEP 1 / 8</span>
      </div>
    </header>

    <section class="progressZone">
      <div class="progressBar"><div class="barFill" id="barFill"></div></div>
      <div class="dots" id="dots"></div>
    </section>

    <section class="card">
      <!-- STEP 1 -->
      <div class="step active" data-step="1">
        <div class="head">
          <span class="badge b1">PROFILE</span>
          <h1>ドライバー基本情報</h1>
          <p>本登録はドライバーご本人が行ってください。</p>
        </div>

        <div class="grid">
          <div class="field">
            <label for="nameKanji">氏名（漢字）</label>
            <input id="nameKanji" autocomplete="name" placeholder="例）山田 太郎" required />
          </div>
          <div class="field">
            <label for="nameKana">フリガナ</label>
            <input id="nameKana" placeholder="例）ヤマダ タロウ" required />
          </div>
          <div class="field">
            <label for="phone">電話番号</label>
            <input id="phone" inputmode="tel" autocomplete="tel" placeholder="090-xxxx-xxxx" required />
          </div>
          <div class="field">
            <label for="email">メールアドレス</label>
            <input id="email" inputmode="email" autocomplete="email" placeholder="example@gmail.com" required />
          </div>
          <div class="field">
            <label for="birthday">生年月日</label>
            <input id="birthday" type="date" required />
          </div>
        </div>

        <div class="nav">
          <button type="button" class="btnGhost" id="prev1">戻る</button>
          <button type="button" class="btnPrimary" id="next1">次へ</button>
        </div>
      </div>

      <!-- STEP 2 -->
      <div class="step" data-step="2">
        <div class="head">
          <span class="badge b2">ADDRESS</span>
          <h1>住所</h1>
          <p>住所は番地・建物名まで入力してください。</p>
        </div>

        <div class="grid">
          <div class="field">
            <label for="zip">郵便番号</label>
            <input id="zip" inputmode="numeric" placeholder="例）890-0065" required />
          </div>
          <div class="field">
            <label for="address">住所</label>
            <input id="address" placeholder="例）鹿児島県鹿児島市荒田1-2-10" required />
          </div>
        </div>

        <div class="nav">
          <button type="button" class="btnGhost" id="prev2">戻る</button>
          <button type="button" class="btnPrimary" id="next2">次へ</button>
        </div>
      </div>

      <!-- STEP 3 -->
      <div class="step" data-step="3">
        <div class="head">
          <span class="badge b3">AFFILIATION</span>
          <h1>所属</h1>
          <p>あなたの所属に近いものを選択してください。</p>
        </div>

        <div class="seg" id="affSeg">
          <button type="button" class="segBtn active" data-value="協力会社">協力会社</button>
          <button type="button" class="segBtn" data-value="FC">FC</button>
          <button type="button" class="segBtn" data-value="個人">個人</button>
        </div>

        <div class="grid mt">
          <div class="field">
            <label for="affCompany">所属会社名（任意）</label>
            <input id="affCompany" placeholder="株式会社○○ / ○○運送 など" />
          </div>
        </div>

        <div class="nav">
          <button type="button" class="btnGhost" id="prev3">戻る</button>
          <button type="button" class="btnPrimary" id="next3">次へ</button>
        </div>
      </div>

      <!-- STEP 4 -->
      <div class="step" data-step="4">
        <div class="head">
          <span class="badge b4">VEHICLE</span>
          <h1>車両情報</h1>
          <p>稼働に必要な車両情報を入力してください。</p>
        </div>

        <div class="grid">
          <div class="field">
            <label for="carType">車種</label>
            <select id="carType" required>
              <option value="">選択してください</option>
              <option value="軽バン">軽バン</option>
              <option value="軽トラ">軽トラ</option>
              <option value="幌車">幌車</option>
              <option value="クール車">クール車</option>
              <option value="その他">その他</option>
            </select>
          </div>

          <div class="field">
            <label for="carNo">車両ナンバー（任意）</label>
            <input id="carNo" placeholder="例）鹿児島 480 さ 12-34" />
          </div>

          <div class="field">
            <label for="blackPlate">黒ナンバー</label>
            <select id="blackPlate" required>
              <option value="">選択してください</option>
              <option value="あり">あり</option>
              <option value="なし">なし</option>
              <option value="申請中">申請中</option>
              <option value="リース希望">リース希望</option>
            </select>
          </div>
        </div>

        <div class="nav">
          <button type="button" class="btnGhost" id="prev4">戻る</button>
          <button type="button" class="btnPrimary" id="next4">次へ</button>
        </div>
      </div>

      <!-- STEP 5 -->
      <div class="step" data-step="5">
        <div class="head">
          <span class="badge b5">BANK</span>
          <h1>振込口座</h1>
          <p>報酬振込用の口座情報を入力してください。</p>
        </div>

        <div class="grid">
          <div class="field">
            <label for="bankName">銀行</label>
            <input id="bankName" placeholder="例）三井住友銀行" required />
          </div>
          <div class="field">
            <label for="accountType">口座種別</label>
            <select id="accountType" required>
              <option value="">選択してください</option>
              <option value="普通">普通</option>
              <option value="当座">当座</option>
            </select>
          </div>
          <div class="field">
            <label for="accountNumber">口座番号</label>
            <input id="accountNumber" inputmode="numeric" placeholder="例）1234567" required />
          </div>
          <div class="field">
            <label for="accountNameKana">口座名義（カナ）</label>
            <input id="accountNameKana" placeholder="例）ヤマダ タロウ" required />
          </div>
        </div>

        <div class="nav">
          <button type="button" class="btnGhost" id="prev5">戻る</button>
          <button type="button" class="btnPrimary" id="next5">次へ</button>
        </div>
      </div>

      <!-- STEP 6 -->
      <div class="step" data-step="6">
        <div class="head">
          <span class="badge b6">UPLOAD</span>
          <h1>免許証画像の提出</h1>
          <p>画像は鮮明なものをアップロードしてください。</p>
        </div>

        <div class="uploadGrid">
          <div class="upCard">
            <div class="upTop">
              <div class="upTitle">免許証 表面</div>
              <div class="miniTag">必須</div>
            </div>
            <input type="file" id="licFront" accept="image/*" />
            <img class="preview" id="prevFront" alt="preview front" />
            <p class="subHelp">※文字が読める距離で撮影してください。</p>
          </div>

          <div class="upCard">
            <div class="upTop">
              <div class="upTitle">免許証 裏面</div>
              <div class="miniTag gray">任意</div>
            </div>
            <input type="file" id="licBack" accept="image/*" />
            <img class="preview" id="prevBack" alt="preview back" />
            <p class="subHelp">※裏面に記載がある場合は提出してください。</p>
          </div>
        </div>

        <div class="nav">
          <button type="button" class="btnGhost" id="prev6">戻る</button>
          <button type="button" class="btnPrimary" id="next6">次へ</button>
        </div>
      </div>

      <!-- STEP 7 -->
      <div class="step" data-step="7">
        <div class="head">
          <span class="badge b7">TERMS</span>
          <h1>確認事項</h1>
          <p>内容を確認し、同意して次へ進んでください。</p>
        </div>

        <div class="termsBox">
          <ul>
            <li>本登録はドライバー本人が行うものとします。</li>
            <li>入力内容および提出書類は正確な情報であることを保証してください。</li>
            <li>虚申告・不正が判明した場合、登録・契約をお断りする場合があります。</li>
            <li>取得した個人情報は、業務連絡・案件調整・法令対応の目的で利用します。</li>
            <li>登録後、OFA GROUP担当者より連絡を行い案件を決定します。</li>
          </ul>
        </div>

        <label class="agreeRow">
          <input type="checkbox" id="agree" />
          <span class="agreeText">上記に同意します</span>
        </label>

        <div class="nav">
          <button type="button" class="btnGhost" id="prev7">戻る</button>
          <button type="button" class="btnPrimary" id="next7">次へ</button>
        </div>
      </div>

      <!-- STEP 8 -->
      <div class="step" data-step="8">
        <div class="head">
          <span class="badge b8">DONE</span>
          <h1>登録完了</h1>
          <p>
            ① まず「OFAメンバーシップLINE」を追加（または開く）<br/>
            ② 次に「登録PDFを作成」し、PDFをLINEへ送信してください
          </p>
        </div>

        <div class="ctaStack">
          <a class="btnLine" id="openLineBtn" href="https://lin.ee/8x437Vt" target="_blank" rel="noopener">
            OFAメンバーシップLINEを追加/開く
          </a>

          <button type="button" class="btnPrimary" id="makePdfBtn" disabled>
            登録PDFを作成（保存・共有・印刷）
          </button>

          <p class="note">
            ※LINEを先に追加してからPDF作成してください（送信先が表示されない場合があります）。<br/>
            ※PDF作成後、共有ボタンから「LINE」へ送信できます。印刷は共有→印刷でOK。
          </p>
        </div>

        <div class="nav">
          <button type="button" class="btnGhost" id="prev8">戻る</button>
          <button type="button" class="btnPrimary" id="restart">最初から</button>
        </div>
      </div>
    </section>

    <div class="foot">
      <span>© OFA GROUP</span>
      <span>One for All, All for One</span>
    </div>
  </main>

  <div class="toast" id="toast">保存しました</div>

  <!-- PDF生成用（画面外） -->
  <section class="pdfPaper" id="pdfPaper" aria-hidden="true">
    <!-- PAGE 1 -->
    <div class="pdfPage" id="pdfPage1">
      <div class="pdfHeader">
        <div>
          <div class="pdfTitle">OFA GROUP ドライバー登録シート</div>
          <div class="pdfDate" id="pdfDate1">作成日時：</div>
        </div>
        <div class="pdfRight">
          <div class="pdfMotto">One for All, All for One</div>
          <div class="pdfPageNo">1 / 2</div>
        </div>
      </div>
      <div class="pdfGrid" id="pdfGrid"></div>
      <div class="pdfFooterNote">
        このPDFを「OFAメンバーシップLINE」へ添付して送信してください。
      </div>
    </div>

    <!-- PAGE 2 -->
    <div class="pdfPage" id="pdfPage2">
      <div class="pdfHeader">
        <div>
          <div class="pdfTitle">OFA GROUP ドライバー登録シート</div>
          <div class="pdfDate" id="pdfDate2">作成日時：</div>
        </div>
        <div class="pdfRight">
          <div class="pdfMotto">One for All, All for One</div>
          <div class="pdfPageNo">2 / 2</div>
        </div>
      </div>

      <div class="pdfSectionTitle">提出画像</div>
      <div class="pdfImgGrid">
        <div class="pdfImgBox">
          <div class="pdfImgLabel">免許証 表面（必須）</div>
          <img id="pdfLicFront" alt="license front" />
        </div>
        <div class="pdfImgBox">
          <div class="pdfImgLabel">免許証 裏面（任意）</div>
          <img id="pdfLicBack" alt="license back" />
        </div>
      </div>

      <div class="pdfFooterNote">
        ※免許証画像は「上下余白のみ」トリミングし、読みやすい大きさで最大表示します。
      </div>
    </div>
  </section>

  <!-- libs（CDN） -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <script src="./app.js"></script>
</body>
</html>
